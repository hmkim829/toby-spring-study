# 1.5.2 컨테이너 인프라 빈을 위한 자바 코드 메타정보

## IoC/DI 설정 방법의 발전
|버전|애플리케이션 로직 빈|애플리케이션 인프라 빈|컨테이너 인프라 빈|
|---|---|---|---|
|스프링 1.x|\<bean>|\<bean>|\<bean>|
|스프링 2.0|\<bean>|\<bean>|전용 태그|
|스프링 2.5|\<bean>, 빈 스캔|\<bean>|전용 태그|
|스프링 3.0|\<bean>|\<bean>|전용 태그|
|스프링 3.1|\<bean>, 빈 스캔, 자바 코드|\<bean>, 자바 코드|전용 태그, 자바코드|

## 자바 코드를 이용한 컨테이너 인프라 빈 등록

### @ComponentScan
- @Configuration이 붙은 클래스에 추가하면 \<context:component-sacn>을 사용한 것처럼 빈을 자동으로 스캔해서 등록해준다.
- 단점 : 패키지명을 길게 썼을 경우
    + 오타 발생
    + 리팩토링으로 패키지를 옮기거나 패키지 이름이 바뀌는 경우 같이 수정되지 않음
    + 여러 패키지를 쓰면 길어짐
~~~java
@Configuration
// scanner 패키지와 하위 클래스 중에서 스캔 대상을 찾음.
@ComponentScan("Springbook.learningtest.spring31.ioc.scanner")
public class AppConfig{
}
~~~   

- 패키지 이름 대신에 마커인터페이스를 넣는 방법도 있다.
- 마커 클래스나 인터페이스의 패키지가 빈 스캐닝의 기준 패키지가 된다.
- 장점
    + 컴파일 과정에서 오타를 검출할 수 있음
    + IDE에서 리팩토링을 하더라도 함께 변경되서 안전하다
~~~java
public interface ServiceMarker{
}

@Configuration
// scanner 패키지와 하위 클래스 중에서 스캔 대상을 찾음.
@ComponentScan(basePackageClasses=ServiceMarker.class)
public class AppConfig{
}
~~~

- myproject 패키지 하위에 Configuration 애노테이션을 갖는 것들은 스캔에서 제외
~~~java
import java.lang.module.Configuration;@Configuration
@ComponentScan(basePackages="myproject", excludeFilters=@Filter(Configuration.class))
public class AppConfig{
}
~~~

- Filter.ASSIGNABLE_TPYE를 사용하면 myproject 패키지 하위에 AppConfig 클래스만 제외
~~~java
import java.lang.module.Configuration;import java.util.logging.Filter;@Configuration
@ComponentScan(basePackages="myproject", excludeFilters=@Filter(type=Filter.ASSIGNABLE_TPYE, value=AppConfig.class))
public class AppConfig{
}
~~~
   

### @Import

### @ImportResource

### @EnableTransactionManagement
